{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Nicole\\\\Desktop\\\\Projekt grupp 28\\\\playlistgenerator\\\\src\\\\js\\\\presenters\\\\exploreArtistsPresenter.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport SongSource from '../songSource';\nimport { PromiseNoData } from '../promiseNoData';\nimport { ExploreArtistsView, StopMusic } from '../views/exploreArtistsView';\nimport promiseNoArtists from '../promiseNoArtists';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ExploreArtistsPresenter(props) {\n  _s();\n\n  const [promise, setPromise] = React.useState(null);\n  const [data, setData] = React.useState(null);\n  const [error, setError] = React.useState(null);\n  const [genre, setGenre] = React.useState(props.model.currentGenre);\n  const [promiseSongs, setPromiseSongs] = React.useState(null);\n  const [dataSongs, setDataSongs] = React.useState(null);\n  const [errorSongs, setErrorSongs] = React.useState(null);\n  const [audio, setAudio] = React.useState(null);\n  const [dataIndex, setDataIndex] = React.useState(0);\n  let index = 0;\n  React.useEffect(() => {\n    const obs = () => {\n      setGenre(props.model.currentGenre);\n      setPromise(SongSource.getArtistsFromGenre(genre).then(data => setData(data)).catch(error => setError(error)));\n      setDataIndex(0);\n    };\n\n    props.model.addObserver(obs);\n    return () => props.model.removeObserver(obs);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [promiseNoArtists(promise, data, error) || /*#__PURE__*/_jsxDEV(ExploreArtistsView, {\n      artist: data.data,\n      genre: genre,\n      audio: audio,\n      func: id => {\n        setPromiseSongs(SongSource.getSongsFromArtist(id).then(dataSongs => {\n          setDataSongs(dataSongs);\n\n          if (dataSongs.error === undefined) {\n            setAudio(playMusic(dataSongs.data, index));\n          }\n        }).catch(errorSongs => setErrorSongs(errorSongs)));\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 17\n    }, this), PromiseNoData(promiseSongs, dataSongs, errorSongs) || /*#__PURE__*/_jsxDEV(StopMusic, {\n      audio: audio,\n      song: dataSongs.data[dataIndex],\n      nextSong: () => {\n        dataIndex < 4 ? setDataIndex(dataIndex + 1) : setDataIndex(0);\n        setAudio(playMusic(dataSongs.data, dataIndex + 1));\n      },\n      musicStopped: () => setAudio(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 68\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ExploreArtistsPresenter, \"XeFn3iAd1mzUuPPnP1fhsRw9N14=\");\n\n_c = ExploreArtistsPresenter;\n\nfunction playMusic(songs, index) {\n  if (index === 5) {\n    index = 0;\n  }\n\n  const audio = new Audio();\n  audio.src = songs[index].preview;\n  console.log(audio);\n  audio.play();\n  return audio;\n}\n\nexport default ExploreArtistsPresenter;\n\nvar _c;\n\n$RefreshReg$(_c, \"ExploreArtistsPresenter\");","map":{"version":3,"sources":["C:/Users/Nicole/Desktop/Projekt grupp 28/playlistgenerator/src/js/presenters/exploreArtistsPresenter.js"],"names":["React","SongSource","PromiseNoData","ExploreArtistsView","StopMusic","promiseNoArtists","ExploreArtistsPresenter","props","promise","setPromise","useState","data","setData","error","setError","genre","setGenre","model","currentGenre","promiseSongs","setPromiseSongs","dataSongs","setDataSongs","errorSongs","setErrorSongs","audio","setAudio","dataIndex","setDataIndex","index","useEffect","obs","getArtistsFromGenre","then","catch","addObserver","removeObserver","id","getSongsFromArtist","undefined","playMusic","songs","Audio","src","preview","console","log","play"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport SongSource from '../songSource';\r\nimport {PromiseNoData} from '../promiseNoData';\r\nimport { ExploreArtistsView, StopMusic } from '../views/exploreArtistsView';\r\nimport promiseNoArtists from '../promiseNoArtists';\r\n\r\n\r\nfunction ExploreArtistsPresenter(props) {\r\n    const [promise, setPromise] = React.useState(null);\r\n    const [data, setData] = React.useState(null);\r\n    const [error, setError] = React.useState(null);\r\n\r\n    const [genre, setGenre] = React.useState(props.model.currentGenre);\r\n\r\n    const [promiseSongs, setPromiseSongs] = React.useState(null);\r\n    const [dataSongs, setDataSongs] = React.useState(null);\r\n    const [errorSongs, setErrorSongs] = React.useState(null);\r\n\r\n    const [audio, setAudio] = React.useState(null);\r\n    const [dataIndex, setDataIndex] = React.useState(0);\r\n    let index = 0;\r\n\r\n\r\n    React.useEffect(() => {\r\n        const obs = () => {\r\n            setGenre(props.model.currentGenre)\r\n            setPromise(\r\n                SongSource.getArtistsFromGenre(genre)\r\n                    .then((data) => setData(data))\r\n                    .catch((error) => setError(error))\r\n            )\r\n            setDataIndex(0);\r\n        };\r\n        props.model.addObserver(obs);\r\n        return () => props.model.removeObserver(obs);\r\n    }, []);\r\n\r\n    return (\r\n        <div>\r\n            {promiseNoArtists(promise, data, error) || (\r\n                <ExploreArtistsView artist={data.data}\r\n                    genre={genre}\r\n                    audio={audio}\r\n                    func={(id) => {\r\n                        setPromiseSongs(\r\n                            SongSource.getSongsFromArtist(id)\r\n                                .then((dataSongs) => {\r\n                                    setDataSongs(dataSongs);\r\n                                    if (dataSongs.error === undefined) {\r\n                                        setAudio(playMusic(dataSongs.data, index));\r\n                                    }\r\n                                })\r\n                                .catch((errorSongs) => setErrorSongs(errorSongs)),\r\n                        )\r\n                    }} />\r\n            )}\r\n            {PromiseNoData(promiseSongs, dataSongs, errorSongs) || <StopMusic audio={audio}\r\n                song={dataSongs.data[dataIndex]}\r\n                nextSong={() => {\r\n                    (dataIndex < 4) ? setDataIndex(dataIndex + 1) : setDataIndex(0);\r\n                    setAudio(playMusic(dataSongs.data, dataIndex + 1))\r\n                }}\r\n                musicStopped={() => setAudio(null)}\r\n            />\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction playMusic(songs, index) {\r\n    if (index === 5) {\r\n        index = 0;\r\n    }\r\n    const audio = new Audio();\r\n    audio.src = songs[index].preview\r\n\r\n    console.log(audio)\r\n    audio.play();\r\n    return audio;\r\n}\r\n\r\n\r\n\r\nexport default ExploreArtistsPresenter;\r\n"]},"metadata":{},"sourceType":"module"}