{"ast":null,"code":"class PlaylistModel {\n  constructor() {\n    this.playlistID = 1;\n    this.playlistName = null;\n    this.chosenNumberOfSongs = 0;\n    this.actualNumberOfSongs = 0;\n    this.explicit = false;\n    this.genres = [];\n    this.currentSong = null;\n    this.songs = [];\n    this.observers = [];\n    this.artist = null;\n    this.total = 0;\n    this.currentSong = null;\n    this.currentAudio = null;\n    this.playlistDone = false;\n  }\n\n  resetModel() {\n    this.playlistID = this.playlistID + 1;\n    this.playlistName = null;\n    this.chosenNumberOfSongs = 0;\n    this.actualNumberOfSongs = 0;\n    this.explicit = false;\n    this.genres = [];\n    this.currentSong = null;\n    this.songs = [];\n    this.observers = [];\n    this.artist = null;\n    this.total = 0;\n    this.currentSong = null;\n    this.currentAudio = null;\n    this.playlistDone = false;\n  }\n\n  addGenre(radioID, value, name) {\n    if (value === 0) {\n      console.log(\"remove\");\n      this.removeGenre(radioID);\n      this.setTotalPercent();\n      return;\n    }\n\n    if (this.genres.some(g => g.id === radioID)) {\n      this.genres.find(g => g.id === radioID).value = value / 100;\n      this.setTotalPercent();\n      return;\n    }\n\n    this.genres = [...this.genres, {\n      id: radioID\n    }];\n    this.genres.find(x => x.id === radioID).value = value / 100;\n    this.genres.find(x => x.id === radioID).name = name;\n    console.log(this.genres);\n    this.setTotalPercent();\n    console.log(this.total);\n    this.notifyObservers();\n  }\n\n  removeGenre(radioID) {\n    this.genres = this.genres.filter(genre => genre.id !== radioID);\n    this.notifyObservers();\n  }\n\n  setTotalPercent() {\n    let total = 0;\n    this.genres.forEach(genre => {\n      total += genre.value;\n    });\n    this.total = total;\n    this.notifyObservers();\n  }\n\n  setNumberOfSongs(length) {\n    this.chosenNumberOfSongs = length;\n    console.log(this.chosenNumberOfSongs);\n    this.notifyObservers();\n  }\n\n  setActualNumberOfSongs(length) {\n    this.actualNumberOfSongs += length;\n\n    if (this.actualNumberOfSongs >= this.chosenNumberOfSongs) {\n      return;\n    }\n\n    console.log(this.actualNumberOfSongs);\n    this.notifyObservers();\n  }\n\n  setExplicit(choice) {\n    console.log(choice);\n    this.explicit = choice;\n    console.log(this.explicit);\n    this.notifyObservers();\n  }\n\n  setPlaylistName(name) {\n    this.playlistName = name;\n    this.notifyObservers();\n  }\n\n  setCurrentSong(song) {\n    if (this.currentSong === song) {\n      this.removeCurrentAudio();\n      return;\n    }\n\n    if (this.currentAudio !== null) {\n      this.removeCurrentAudio();\n    }\n\n    this.currentSong = song;\n    this.setCurrentAudio(song);\n    this.notifyObservers();\n  }\n\n  setCurrentAudio(song) {\n    this.currentAudio = new Audio();\n    this.currentAudio.src = song.preview;\n    this.currentAudio.play();\n    this.notifyObservers();\n  }\n\n  removeCurrentAudio() {\n    this.currentAudio.pause();\n    this.currentSong = null;\n    this.notifyObservers();\n  }\n\n  addSongsToPlaylist(arrayWithSongs) {\n    console.log(this.chosenNumberOfSongs);\n\n    if (this.songs.length >= this.chosenNumberOfSongs) {\n      return;\n    }\n\n    this.songs = this.songs.concat(arrayWithSongs);\n    console.log(this.actualNumberOfSongs);\n    this.playlistDone = true;\n    this.notifyObservers();\n  }\n\n  addArtist(artist) {\n    this.artist = artist;\n    this.notifyObservers();\n  }\n\n  removeArtist() {\n    this.artist = null;\n    this.notifyObservers();\n  }\n\n  addObserver(callback) {\n    this.observers = [...this.observers, callback];\n  }\n\n  removeObserver(callback) {\n    this.observers = this.observers.filter(obs => obs !== callback);\n  }\n\n  notifyObservers() {\n    this.observers.forEach(cb => {\n      try {\n        cb();\n      } catch (e) {\n        console.log(e);\n      }\n    });\n  }\n\n  setcurrentSong(id) {\n    if (this.currentSong === id) {\n      return;\n    }\n\n    this.currentSong = id;\n    this.notifyObservers();\n  }\n\n}\n\nexport default PlaylistModel;","map":{"version":3,"sources":["C:/Users/Nicole/Desktop/Projekt grupp 28/playlistgenerator/src/js/playlistModel.js"],"names":["PlaylistModel","constructor","playlistID","playlistName","chosenNumberOfSongs","actualNumberOfSongs","explicit","genres","currentSong","songs","observers","artist","total","currentAudio","playlistDone","resetModel","addGenre","radioID","value","name","console","log","removeGenre","setTotalPercent","some","g","id","find","x","notifyObservers","filter","genre","forEach","setNumberOfSongs","length","setActualNumberOfSongs","setExplicit","choice","setPlaylistName","setCurrentSong","song","removeCurrentAudio","setCurrentAudio","Audio","src","preview","play","pause","addSongsToPlaylist","arrayWithSongs","concat","addArtist","removeArtist","addObserver","callback","removeObserver","obs","cb","e","setcurrentSong"],"mappings":"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","sourcesContent":["class PlaylistModel {\r\n    constructor() {\r\n        this.playlistID = 1;\r\n        this.playlistName = null;\r\n        this.chosenNumberOfSongs = 0;\r\n        this.actualNumberOfSongs = 0;\r\n        this.explicit = false;\r\n        this.genres = [];\r\n        this.currentSong = null;\r\n        this.songs = [];\r\n        this.observers = [];\r\n        this.artist = null;\r\n        this.total = 0;\r\n        this.currentSong = null;\r\n        this.currentAudio = null;\r\n        this.playlistDone = false;\r\n    }\r\n\r\n    resetModel() {\r\n        this.playlistID = this.playlistID + 1;\r\n        this.playlistName = null;\r\n        this.chosenNumberOfSongs = 0;\r\n        this.actualNumberOfSongs = 0;\r\n        this.explicit = false;\r\n        this.genres = [];\r\n        this.currentSong = null;\r\n        this.songs = [];\r\n        this.observers = [];\r\n        this.artist = null;\r\n        this.total = 0;\r\n        this.currentSong = null;\r\n        this.currentAudio = null;\r\n        this.playlistDone = false;\r\n    }\r\n\r\n    addGenre(radioID, value, name) {\r\n\r\n        if (value === 0) {\r\n            console.log(\"remove\")\r\n            this.removeGenre(radioID);\r\n            this.setTotalPercent();\r\n            return;\r\n        }\r\n        if (this.genres.some(g => g.id === radioID)) {\r\n            this.genres.find(g => g.id === radioID).value = (value / 100);\r\n            this.setTotalPercent();\r\n            return;\r\n        }\r\n\r\n        this.genres = [...this.genres, { id: radioID }];\r\n        this.genres.find(x => x.id === radioID).value = (value / 100);\r\n        this.genres.find(x => x.id === radioID).name = name;\r\n        console.log(this.genres);\r\n        this.setTotalPercent();\r\n        console.log(this.total)\r\n\r\n\r\n        this.notifyObservers();\r\n    }\r\n\r\n    removeGenre(radioID) {\r\n        this.genres = this.genres.filter((genre) => genre.id !== radioID);\r\n        this.notifyObservers();\r\n    }\r\n\r\n    setTotalPercent() {\r\n        let total = 0;\r\n        this.genres.forEach(genre => {\r\n            total += genre.value;\r\n        });\r\n        this.total = total;\r\n        this.notifyObservers();\r\n    }\r\n\r\n    setNumberOfSongs(length) {\r\n        this.chosenNumberOfSongs = length;\r\n        console.log(this.chosenNumberOfSongs)\r\n        this.notifyObservers();\r\n    }\r\n\r\n    setActualNumberOfSongs(length) {\r\n        this.actualNumberOfSongs += length;\r\n        if (this.actualNumberOfSongs >= this.chosenNumberOfSongs) {\r\n            return;\r\n        }\r\n        console.log(this.actualNumberOfSongs)\r\n        this.notifyObservers();\r\n    }\r\n\r\n    setExplicit(choice) {\r\n        console.log(choice)\r\n        this.explicit = choice;\r\n        console.log(this.explicit);\r\n        this.notifyObservers();\r\n    }\r\n\r\n    setPlaylistName(name) {\r\n        this.playlistName = name;\r\n        this.notifyObservers();\r\n    }\r\n\r\n    setCurrentSong(song) {\r\n        if (this.currentSong === song) {\r\n            this.removeCurrentAudio();\r\n            return;\r\n        }\r\n        if (this.currentAudio !== null) {\r\n            this.removeCurrentAudio();\r\n        }\r\n        this.currentSong = song;\r\n        this.setCurrentAudio(song);\r\n        this.notifyObservers();\r\n    }\r\n\r\n    setCurrentAudio(song) {\r\n        this.currentAudio = new Audio();\r\n        this.currentAudio.src = song.preview;\r\n        this.currentAudio.play();\r\n        this.notifyObservers();\r\n    }\r\n\r\n    removeCurrentAudio() {\r\n        this.currentAudio.pause();\r\n        this.currentSong = null;\r\n        this.notifyObservers();\r\n    }\r\n\r\n    addSongsToPlaylist(arrayWithSongs) {\r\n        console.log(this.chosenNumberOfSongs)\r\n        if (this.songs.length >= this.chosenNumberOfSongs) {\r\n            return;\r\n        }\r\n        this.songs = this.songs.concat(arrayWithSongs);\r\n        console.log(this.actualNumberOfSongs)\r\n        this.playlistDone = true;\r\n\r\n        this.notifyObservers();\r\n    }\r\n\r\n    addArtist(artist) {\r\n        this.artist = artist;\r\n        this.notifyObservers();\r\n    }\r\n\r\n    removeArtist() {\r\n        this.artist = null;\r\n        this.notifyObservers();\r\n    }\r\n\r\n    addObserver(callback) {\r\n        this.observers = [...this.observers, callback];\r\n    }\r\n    removeObserver(callback) {\r\n        this.observers = this.observers.filter(obs => obs !== callback);\r\n    }\r\n    notifyObservers() {\r\n        this.observers.forEach(cb => {\r\n            try { cb() } catch (e) { console.log(e) }\r\n        });\r\n    }\r\n    setcurrentSong(id) {\r\n        if (this.currentSong === id) {\r\n            return;\r\n        }\r\n        this.currentSong = id;\r\n        this.notifyObservers();\r\n    }\r\n}\r\n\r\nexport default PlaylistModel;"]},"metadata":{},"sourceType":"module"}